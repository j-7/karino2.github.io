---
title: "Real Analysis and Probabilityをやるぞ！"
date: 2018-03-18 11:29:30
---

Dudleyの、Real Analysis and Probability (Cambridge Studies in Advanced Mathematics)を読んでみる。

<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="https://rcm-fe.amazon-adsystem.com/e/cm?ref=qf_sp_asin_til&t=karino203-22&m=amazon&o=9&p=8&l=as1&IS1=1&detail=1&asins=B01LXAOTHG&bc1=ffffff&lt1=_top&fc1=333333&lc1=0066c0&bg1=ffffff&f=ifr"> </iframe>

実解析ベースの確率論の入門書らしい。
最初からこれやれば良かったんじゃね？という気はするが、果たして？

### どこで買うか

当初は本家で買おうと思ったが、epubかADEと言われて、買う気を失う。
そこでKindleにする。

まずはサンプル読んでみて、記号とか問題無さそうなら買う方向で。

### 序盤の集合論があまりにもだるい

なんかあまりにも初心者向けすぎて、ちょっと読みきれない。

という事でサンプル版での評価はそうそうに諦めて、普通に購入した。  
8章の確率論から読んで見る事にする。
トポロジーのあたりとかが必要になったら、その辺は戻って見直す、という方向で。

# 8 章

とりえず冒頭はだるいので適当に読み流し。
この本のこの手の枕は、かえって理解を妨げる気がする。
まぁ無視すればよろし。

## 8.1 Basic Definition

で、8.1から。

割と普通の母集団、サンプル、事象を元にした確率論の定式化ではじまる。
で、普通にランダム変数が可測関数として定義される。

あれ？もっと分布関数とかを元にした、抽象的な話を期待してたのだが…  
まぁまだ最初だ。もう少し読み進めてみよう。

lawって最近よく見るが日本語しらないな。まぁいい。
ランダム変数の値域のボレル集合族の上で定義される、PとX^-1の合成だと。これってボレル集合族の元が起こる確率だよな。

次に、事象の独立の定義があり、ランダム変数の独立の定義がある。

昔はすぐごっちゃになってたが、今見るとこの辺の定義はおもちゃみたいだな。
2-groundedでnondecreasingでどーたらこーたらな分布関数、とかが裏にあるんだよな。今なら分かる。

全て1次元の確率空間の直積で定義されるので、marginalとかの抽象的な条件も不要。で、独立は個々の積と等しくなる事、と。ちょー簡単。  
前読んだ本で実解析レベルを上げすぎたか…

### indicator functionと事象の集合の独立

ふんふん、と読んでいくと、定理8.1.2の次に、set of eventsの独立が、indictor functionで定義されている。

もともと2つのイベントの独立は、前のページでAかつBのPがPAとPBの積、という風に定義されている。

だから別に任意の組み合わせで独立、という定義で良い気はするが、indicator functionがjointlyにindependentだ、という方が一言で定義出来て簡潔という事か。

両者が等しいかは自明では無いが、まぁ等しいだろうな。

### 8.1を読み終わって

なんか期待してたより一段簡単だなぁ、という印象。
9章がlimit theoremの収束判定周辺の話っぽいので、8章は下準備、という事なのかもしれないが。

一通りの定義が、分かりやすく短くまとまってるので、手元に置いておいて参照するのには良さそう。
なんか行間も短いのだよな。
そのくせ幅は狭い…

もう少し読み進めて、感想がどう変わるか見てみよう。

## 8.2 Infinite Products of Probability Spaces

無限の点列的な話をしようとしているように見える。

For expampleの例が長くてよく分からかい。
まず、オメガは0〜9の数字が並んだ物だよな。

でxはそれを0.1、 0.01と掛けて足し合わせた物だ。

### $$A_k$$ってなんだ？

さて、Akからよく分からない。
まず、任意の正の整数の集合は、
2で割れるが4で割れない集合、4で割れるが8で割れない集合、…みたいな物のunionで表せる、と言ってる。よくわからん。

例えばA3は何か。4で割れて8で割れない整数全体だ。
正だけで考えると

$${4, 12, 20, ...}$$

という集合か。
次にA1はなんだ？奇数だな。

$${1, 3, 5, ...}$$

ではA2は？2で割れて4で割れない。

$${2, 6, 10, 14, 18, ...}$$

このunionで任意の自然数の集合が表せる？
そんな事は無いよな。

例えば3, 7という集合は、この方法では表せない。

任意の集合じゃなくて、全自然の集合か。それは表せそうな気がするな。

あー、そうか、Akは重複が無いのね。なるほど。

n(k, i)は何か。nは関数という事か。
で、iはAkのi番目の要素、という事か。

### $$y_k$$はなんだ？

ykの定義のjはxのjから来ているのかな。
簡単の為、y1を考えると、A1が奇数、

$${1, 3, 5, ...}$$

だったのだから、y1は

$$j_1/10+j_3/100+j_5/1000+...$$

という数だな。y2はA2が

$${2, 6, 10, 14, 18, ...}$$

だったのだから、

$$j_2/10+j_6/100+j_{10}/1000+...$$

か。

xを決めればjが決まるので、yは決まるな。

逆にyを決めればjの点列は一意に決まるので、この2つは一対一に対応しているかな？

まったく同じyを生成する2つのxは存在出来るか？
yが同じ為には全jが同じじゃないと駄目だから多分ムリだな。

Tというのはxからyの列への射影だな。
Tのインバースは$$[0, 1]$$の上への射影なので、それの測度が考えられる

yのボレル集合族の元とかその逆元とか全然想像出来ないが、まぁ可測関数なんだろう、たぶん。

### VとかWとか

PnとかVnを考えていく。
もともとは、xはオメガの直積からの射影だった訳だよな。

これを逆に、0,1の範囲でxをえいっと決めて、これのxによる逆像が存在してれば、そのn番目をとるのが、
Vnのインバースだよな。

つまりランダム変数の逆写像的な物。

![](https://i.imgur.com/6CCfhmc.jpg)

PnがVnのインバースとラムダで表現出来る、という事は、感覚的にはVnがだいたい全部覆うような写像になってれば良さそう。

そのあとのWは、直積した結果全体の話となってる。
で、Tnの具体的な形は出てないので、これはこういう形で表現出来るようなTが存在する、という話なのだろうな。

つまり実数値から可算個の点列を抜き出して、その点列を一意に表すような実数値を作って、そいつがランダム変数でやってきたかのようにつじつまを合わせられる、と。

自明では無いが、ありそうな話ではある。

### 8.2.2は主張だけ理解して飛ばす

Rの定義と、それを無限に拡張しても存在する、という話。
真面目な証明はゴツいが、軽く眺めると、まぁなりそうかな、という気がして来たので、飲み込む事にして先に進もう。

なんか以前もここ、飲み込んで先に進んだ気がするな。

これで可算個の積についての測度に拡張出来た訳だ。

### 8.2を読み終わった感想

8.1はちょろいと思ったが、8.2はやはりそんなの気のせいだった、と教えてくれた。むずい…

ただ、周辺の話の知識がいろいろあるので、昔この辺やった時よりは、大分何の話をしているかは理解出来る。

なんか具体例がかなり難しい割にさらっと書かれているので、ぱっと見た印象よりは遥かに難しい。
抜けがある訳では無いが、追うのはかなりきつい。

ただ食らいつく事は出来そうなので、もうちょっと頑張って見よう。



## 8.3 大数の法則

ここらへんから極限定理の収束の話になりそう。

almost surelyは確率1で起こる事象。

converge in probabilityは任意のイプシロンに対して、YnとYの差分がイプシロン以上となる確率がゼロになるNが選べる、という感じか。

strong law of  large numberはa.s.に収束。

weak lawはconverge in probabilityで収束する所が違う。

### lim supを思い出す

さて、lim supが久しぶりに出てきたので定義を思い出す。
こういう時は以前読んだ教科書から。


ルベーグ積分から確率論、p114あたり
<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="https://rcm-fe.amazon-adsystem.com/e/cm?ref=qf_sp_asin_til&t=karino203-22&m=amazon&o=9&p=8&l=as1&IS1=1&detail=1&asins=4320015622&bc1=ffffff<1=_top&fc1=333333&lc1=0066c0&bg1=ffffff&f=ifr"> </iframe> 

あんまり説明無いが、頑張って考えてたら思い出してきた。

Akという事象列に対し、あるNで成り立ってても、そこより上とカツをとるので残らない。
だから無限の果てでも起こり続けるAkだけを取ってる訳だな。

なおlim infは外側がunionなので、全部のカツか、そのうち先頭をいくつか抜いた物だけが入っている。

ふむ、イメージは思い出した。

----

いい機会なので、ついでに5.4くらいまでを軽く読み直す。
昔は飛ばした所や理解出来なかった事も、今だと理解出来るな。
成長を実感してやる気を出すなどする。

ボレル=カンテリの補題とかもこれだけ見かけると見慣れてくるね。

----

その後は大数の強法則の証明が続くが、あらすじだけ眺めて深入りはしない。

他の本と見比べると読みやすいね。

8.4のErgodic Theoremは飛ばす。

8章は下準備という事でこんなものでいいだろう。

# 9章 収束とか中心極限定理とか

もともと[以前挫折したThe Methods of Distances in the Theory of Probability and Statistics](https://karino2.github.io/2018/02/08/150.html)が、この辺の話から始まってたのが本書を読むモチベーションの一つなので、頑張って読んで行きたい。

## 9.1 分布関数

[この前読んてたProbabilistic Metric Spaces](https://karino2.github.io/2018/02/08/152.html)がまさにdistribution functionで定式化されていたので、この辺の話は今や見慣れたものである。
むしろこの辺やった事無いのにあの本やったからあんな大変だったのね…

3章の内容が結構参照されてるので、3章も読んでも良いかもしれない。

### 9.1.2 ランダム変数と分布関数の関係

簡単そうなので、ちょっとこの証明を真面目に追ってみる。

Xの分布関数がF、とはどういう意味だろう。

![](https://i.imgur.com/j8Sq7rH.jpg)

となっている、という事だよな。
では$$X_F$$の定義の時、右辺を計算してみよう。

記号がいろいろややこしいが、とりあえず右辺のxはy以下と置き直す。

Xがy以下となる確率を考える。
それはy以下となるようなtの測度となるので、y以下となるようなtを考えれば良い。

とりあえず細かい存在とかはおいといて雑に、y以下の上限をyと置き直して、X=yとなるtが存在すると考えよう。
このtではF(y)＞=tとなる最小のyとなってるから、雑にはF(y)=t。  

Pについてちゃんと書いてないが、p98の3.2.6で定義されてるmeasureなのかな。
いわゆるLebesgue  stiltjes measureという奴か。

tのmeasureの場合、(a, b]に対してb-aが定義か。

すると、tがF(y)以下の範囲のtのメジャーは、F(y) - 0だからF(y)となるな。

これはだいたい証明の所の式か。

厳密には段々になってる場合を考えて、上から抑える最小の元とかを考えて行けば証明出来そう。

これで、Fが与えられた時、以下で定義されるX

![](https://i.imgur.com/HW5dBxE.jpg)

は、その分布関数がFとなってる事は示せた。
ランダム変数になってるかは可測関数かを示さないと駄目だが、まぁなってるだろう。

### 9.1.3 convolutionと確率変数の和

定理9.1.3は良く出てくるが証明ははじめて見たし短いので、少し考えてみる。

まずX+Yのlawとは、元になる確率空間を仮定すると、X+Yの値域上のボレル集合族の元をBとした時、


![](https://i.imgur.com/aLGZ9XI.jpg)

となるような、X+Yの値域上の測度。

あー、教科書ではこのBをAと呼んでるのか。まぁいい。

X+YがBの元である、という場合、YはB-Xの元だ、と言っている。

ちょっと集合的に書いてみよう。

Bは実数上のボレル集合族の元なので、開集合を思っておけばいいだろう。

![](https://i.imgur.com/d9UWha3.jpg)

こんな感じか。
B-Xがボレル集合族の元かは自明じゃないが、まぁなってそう。

indicator functionがこの証明のように書けるのは良い。

これから結論に辿り着くのはちょっと辛いな。

直積測度の存在証明の所に似たような話があったなぁ、と前述のルベーグ積分の教科書の3.1あたりを見直す。

----

唐突にrebuttalとかいう用事が発生して中断してた。まずは思い出そう。

さて、定理9.1.3。X+Yのlawとは値域上のボレル集合族の元に対して、その逆像の測度だ。

で、右辺のコンボリューションはボレル集合族の元Aに対して定義されているので、対象は揃ってる。

さて、Aをある開集合としてみよう。
で、Yだけに着目して考えると、YはA-Xの元、と考えられる、という話をしている。

するとA-Xの逆像のPによる測度がX+YのlawによるAの測度だな。

さて、Rkは、簡単の為に一次元を考える。
A-Xの逆像を考える時は、XはX+YがAの範囲内となりうる全ての範囲を動く。これはRの全範囲。

うーむ、独立と直積測度を使わないとだめそうなのでこの辺の復習が要るな。
少しやってみるか。

## 4.4 product measure

4.4.3のあたりが関係ありそうな議論だ。
単調族のあたりか。

という事で、この周辺を真面目にやろう。
まずは昔流し読みした以下の本の3章と合わせ進める。

<iframe style="width:120px;height:240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="https://rcm-fe.amazon-adsystem.com/e/cm?ref=qf_sp_asin_til&t=karino203-22&m=amazon&o=9&p=8&l=as1&IS1=1&detail=1&asins=4320015622&bc1=ffffff<1=_top&fc1=333333&lc1=0066c0&bg1=ffffff&f=ifr"> </iframe> 

昔は結果だけ眺めたが、やはりこの辺の証明を追わないと駄目そう。辛たん…

### 3.1 切り口集合

この辺はConvolutionとかと繋がりありそうだな。真面目に読んで行こう。

命題3.2から、xによる切り口集合のyの測度による測度は、xの関数として可測らしい。

### 定理3.4 直積測度

直積測度の定義は3.8だ。このように切り口集合の積分で定義される。

これを踏まえて元の本のconvolutionを見てみよう。

![](https://i.imgur.com/2iWheCb.jpg)

これのGのxによる切り口集合をA-xと考えれば、convolutionには一致しそうだな。

さて、独立とは、XとYの直積のlawがこの測度の直積となっている、というのが定義だ。

で、XとYの直積のlawとX+Yのlawの関係を考えれば良さそうか？

X+YがAに所属する、とは、XとYの直積がある種の集合に属すという意味と考えられる。
でもこの測度が一致するかは良く分からないな。


X+Yのlawをmと置こう。
この時、m（A）はAのX+Yによる逆像のP測度による値。

これがmuとnuの直積測度に一致してればいいのだが。

直積測度はX, Yの逆像をPで測った物だよな。
うーむ、これはあれか。本質的にはbinary  operationとかの生成する測度空間の話か。

いや、待てよ？これは特定の範囲での直積測度と、その解析接続というか拡張の話だよな。

すくなくとも解析接続では、直積測度の一意性は定理3.4で保証されているので、このサブセットでの測度は一致するはずか。

お、分かった気がする。

### densityとか

9.1はその後、densityの話となる。確率密度という奴か。

xでAの範囲を積分するとP(A)となる。

9.1.5は興味ある所だが、証明が練習問題に回されてる！えー？それは無いんじゃない？

### 9.1の感想

この本、分かりやすくは無いな。記述が簡潔過ぎて、行間を埋めるのがそれなりに知ってる事でもきつい。全く知らない事はお手上げに近い。

ただ、他の本をいろいろ調べながらこの本の主張を追っていく、という使い方は出来て、その扱ってるトピックは「まさにこれだ！」という内容になってる。

うーん、この本が存在している事を幸運と感謝すべきか、この本と同じ内容を扱ってる、もっと丁寧な本が無い不運を嘆くべきなのか、微妙だなぁ。

9章はまさに自分が知りたかった内容っぽいので、楽しく読めてはいる。

## 9.2 Random variablesの収束

この辺の話はある程度は前の本でやったはずなのだが、冒頭の説明はきつい…


### 定理9.2.2とKy Fan metric

定理9.2.2のKy Fan距離のあたりで、dがαで上から抑え込める、というあたりが良く分からない。

いや抑え込めるんじゃなくて、抑え込める確率は1-α以上、と言ってるのか。
ああ、そうか。だからαは三角不等式を満たすのか。

## 9.3 lawの収束

なんかjordan decompositionとかいうのが出てくるので5.6を見てみると、signed measureとかいう話が。

軽く読んでみると知らない事なので真面目に勉強する必要はありそうだが、とりあえず今はそのまま進んで見る。

で、lawの収束を符号付き測度で簡単に定義しようとすると厳しすぎるので、任意の有界で連続な実関数の積分値がある測度の積分値に収束するなら、その測度を極限と定義するらしい。

気分的には任意のランダム変数の期待値が収束するような測度は全て同一視するという事だな。

さて、この定義では極限は一つとは限らない気がするが、補題9.3.2がmetric spaceではそれが一つと保証している。

一応簡単にメモしておこう。

![](https://i.imgur.com/XhOBVAD.jpg)

これを元にXのlawの収束の話がある。XのlawはPとXのインバースの合成結果。

さて、lawが収束してもXが収束するかは分からないが、XnがXに確率収束するならlawが収束する、は言える模様。（9.3.5）

逆については言えないが、あるlawが収束する時、確率収束する確率変数列でlawがそれな奴がある、とは言えるらしい。まぁ言えそうだな。

ここから突然lawをPnで表し始める事があってややこしいので注意が要る（9.3.6とか）

### 9.3を読み終わって

相当ややこしい話になってるが、lawとか分布関数は相当やりこんだので、議論は追える。

そしてこの辺から中心極限定理の周辺の議論をしていくのは凄くstraightforwardなので、やる気は出る。

この辺の話題を知りたかった！という内容なので、記述は飛ばしまくりでもやはり読む価値はある。

このあとは特性関数とその一意性の話をやって中心極限定理に進む訳だが、GAN的な応用としてはむしろこの辺の理解の方が重要だよな。

そういう点ではこの本の一番読みたかった所は読み終わりつつある気がする。
理解は浅いが、時間もかかってないので、悪くない費用対効果。必要になったらまた戻ってこよう。

## 9.4 特性関数

昔は確率論というと特性関数と中心極限定理という感じだったが、生成モデルではあんま出番無いよねぇ。

冒頭でRadon-Nikodym微分というのが出てくる。前にもこれ出てきたねぇ。よく知らないが、とりあえずもうちょっと必要になるまで粘ろう。

Pはlawと言っている。確率測度じゃないのに同じ文字を使ってる？
densityを積分したもの、となっていて、ランダム変数が出てない。

もともとlawの定義は確率測度とXのインバースの合成射だったが（8.1）、
densityの定義は積分すると何かのlawになるものだった（p284）ので、定義の順番が変わっただけで、同じ物を指してはいる。

なお、ラムダという測度が出ているが、これはなんだろう？
fがラムダで可測と言っているが、、、

わからん。さっき後回しと言ったばっかだが、Radon-Nikodym微分を読もう。

特性関数は$$f_P$$と書かれていて、densityはfなのでややこしい。注意。

### 定理5.5.4 Radon-Nikodymの定理

まずp174に、absolutely continuous with respect to μ、という言葉の定義が書かれている。

同じ可測空間X, S上で、2つの測度、muとnuがあった時、mu(A)がゼロならnu(A)がゼロ、が言える事らしい。

一応式で書いておこう。

ニューがabsolutely continuous with respect to μとは、

![](https://i.imgur.com/uuwwPkG.jpg)

という事。

なお、singularは別のゼロ集合が存在する、みたいな意味らしい。

で、ここでmuとfが所与の時にnuを以下のように定めると、

![](https://i.imgur.com/l4OHmD6.png)

このニューはabsolutely continuous w.r.t. ミュー、な測度となる。

そりゃそうだ。
で、Randon-Nikodymの定理はこの逆、つまり、absolutely continuous w.r.t. ミューな測度ニューがあったら、それはこのような積分の形で書ける、という物らしい。

で、この被積分関数をRandon-Nikodym微分と呼ぶらしい。

へー、面白いね。なるほど。

### 9.4の冒頭に戻る

さて、以上を踏まえて。

ラムダはR上の確率測度だろう。
どうもa, bの区間ならb-aとなるような測度っぽいな。

で、さらにlawもR上の確率測度だろう。
この場合、ランダム変数の定義域と値域がどちらもRなのでややこしいが。

考えてみると、lawであるかどうか、というのは、逆像を確率測度で射影した物になっているかどうかだが、それはつまり値域が0-1の測度かどうか、という事だけのように思う。
この条件が満たせていれば、たぶん確率変数を定義出来るだろう。

すると、lawと確率測度は、オメガがRの時にはそんな違わない物になってしまう（区別は重要だか）

で、ラムダがゼロとなるようなサブゼットというのは、有理数とか、とにかく長さがゼロの飛び飛びな値の集合だよな。
これの連続関数による逆像はやっぱ測度ゼロだろう。

だからPはabsolutely continuous w.r.t. ラムダ、と言えそう。

という事は、Pはある関数fを用いて、ラムダ上の積分と表せる。

これをfから始めると9.4の冒頭の話になるな。よし、完璧に理解した！

### 9.4.1 probability densityとは何か

9.4.1で正規分布の確率密度が出ていて、これがprobability densityである、という証明がある。

という事でこの前にある定義を少し考えてみる。

まずオメガがRの場合で、R上のルベーグ測度ラムダに対し、measurable で全積分の結果がfなものをprobabilistic density と呼ぶ。

で、このボレル集合Aに対する積分でP(A)を定義する事で、Pが定義出来る。
この時Pはabsolutely continuousなんたらかんたら、になるのはほぼ自明だろう。

このPは確率測度であると同時に、何かのランダム変数のlawになってる、という話っぽいが、そう言えるのかなぁ。
Xを恒等射とすればいつでも言えるか。

この時確率測度は決まらないが、確率変数は決まるので、なんだか気持ち悪いな。  
ただ、分布関数からの定式化は以前見ているので、似たような物ではある。

### 特性関数とmoment generating function

両方出てきてややこしいのでここに軽くまとめておく。moment generating functionはホエールとかの積率母関数って奴だよな。

![](https://i.imgur.com/cmT3xkJ.jpg)

![](https://i.imgur.com/8S8Zkxb.jpg)

## 独立なランダム変数の和について考える

定理9.4.3を見てて、またいまいち良く分からなかったので少し考えた所、思ったより長くなったので節として独立して考えてみる。

独立な確率変数X+Yについて、いろいろ考える。


### ランダム変数の独立

定理9.4.3で出てきた時に、ぱっと思い出せなかったのでメモしておこう。  
定義はp252の下の方。

XとYが独立とは、以下の事。

![](https://i.imgur.com/76ExY5B.png)

つまりランダム変数の直積のlawが個々のlawの直積測度となる事。

### 定理9.4.3を（また）考える

さて、以前のconvolutionでも同じような事を考えたが、X+Yのlawは、XとYが独立という事とどう関連づけられるのだろうか。

X+Yの逆像は、Aから直積の何かの集合への射影ではあるだろう。
これをGと名付けよう。

![](https://i.imgur.com/TkniESl.jpg)

で、このGを直積測度で測ると実数値が得られる。
これが、L(X+Y)という測度でAを測る事に相当するはず。

また、Gは第一要素と第二要素それぞれの集合を考える事が出来る。これをGx, Gyと名付けよう。

GxとGy の何かの測度による値の積になってると思うのだが、なんの測度だろうか？

うーん、ちょっと分からなくなってきたので、具体的な例から考えてみよう。

### 古典的な確率変数の和について考える

以下のような分布のX, Yについて、X+Yを考える。

![](https://i.imgur.com/atDu6WW.jpg)

L(X)は、Indicator functionの積分で定義出来そう。

![](https://i.imgur.com/xhJhObJ.jpg)

L(Y)も定義出来るな。

X+Yもこの場合はindicator functionで表せそう。ただ、その前に分布を書いてみよう。

3から7の間を取る訳だよな。

X+Y=Lとなる時のXとYって、切片がLで傾きが-1の直線だよな。
この直線上の第一象限で切り取られる所の長さが確率密度か？自明では無いが。  たぶんこの自明でない所を直積測度から考えないと駄目なんだろうな。


![](https://i.imgur.com/VNXbCeN.png)

5までは$$\sqrt{2} L$$で増していき、5からは同じ傾きで減っていく感じか。

![](https://i.imgur.com/u5Bydey.png)

X+Yのlawは、3から7の範囲でオーバーラップしている所の面積、という事になる。

あんま簡単な式にはならなさそうだが、これがconvolutionにはなってそう。

### 古典的な場合のX+Yの逆像

さて、X+Yの逆像を考えよう。

Markdownの都合で閉区間をかぎ括弧で表す。で、4以上5以下、つまり「4, 5」の逆像を考えよう。

足した結果が4になる為には、Yは2が最小だからXは2以下。つまりXは「1, 2」となる。Yは「2, 3」か。

また、X+Yが5になる為には、Xの最大が3なので、Yは2以上。これは全範囲か。
Xは「1, 3」で、Y は「2, 4」
となるね。

X+Yがある値の時（例えばLとしよう）、XとYは特定の範囲を取る訳だが、Xの値が決まればYは一意に決まる。

例えばLが4の時、逆像のXは「1, 2」で、この各Xについて点Yが対応するので、直積としては直線になるのか。
そうか、これは先程の切片が4で傾きが-1の直線だな。

ではLを4から5まで動かすと、以下の水色の斜線のような範囲となるか。

![](https://i.imgur.com/up3JipE.png)

これでX+Yによる、ボレル集合の元の逆像が分かった。
この範囲の直積、という事だ。

で、この範囲を直積測度で測った値が、X+Yのlawで「4, 5」を測った結果か？

なるほど、ここの直積測度の所で独立の仮定が要るのか。

よし、分かってきたぞ。ここまでをまとめよう。

1. B(R)の元のX+Yの逆像は、直積空間上のボレル集合族の元になる（たぶん）
2. その直積空間上のボレル集合族の元を測るのは、L（＜X, Y＞）
3. 独立だとそれが、L(X)とL(Y)の直積測度となる

### lawとdensityについて考える

さて、law(X)とはなんぞや？ 
さきほどIndicator functionの積分で定義したものだな。

最初の定義ではXの逆像に確率測度を適用するもの、というのが定義だったが、これの場合不要な確率測度を考える必要が出てくる。

この場合はそれよりも、densityをルベーグ積分した物、という定義の方が良いだろう。で、最初のIndicator functionの積分に戻る訳だ。

### 直積測度を計算してみる

で、直積測度は切り口集合を考えて順番に積分してやれば良い（フビニの定理もあるので、あんま細かい事気にせずやって良い）

その積分を書くと、

![](https://i.imgur.com/DEPPGJA.png)

![](https://i.imgur.com/UYIPFfc.png)

![](https://i.imgur.com/232Kb9R.png)

![](https://i.imgur.com/2rugMWr.png)

よし、独立なら計算出来た。

### まとめ

1. X+Yは可測関数で、逆像はXとYの直積空間上のボレル集合族の元を与える
2. そのボレル集合族の元は、L（＜X, Y＞）で測る事が出来る
3. それは独立ならL(X)とL(Y)の直積測度となり、それはL(X)とL(Y)を順番にルベーグ積分した物となる
4. L(X)などは、densityのルベーグ積分で定義される

よし、ちゃんと理解出来た気がする！
